# 数据库系统设计原理

## 表结构的设计范式

表结构规范化的基本流程

1. 1NF: 保持属性值的原子型(不可再分割)
    - 表结构要有主键
    - 表结构每列的**原子性**，即确保每个属性只代表一个含义，不可再分。
2. 2NF: 消除非主属性对候选键的部份依赖
    - 符合1NF的要求
    - 表结构必须**有主键**
    - **各数据列**必须**直接依赖**于**主键列**。不允许存在**部分依赖的**非主键列。
        - **部份依赖是指表中存在一部份不依赖于主键的非主键列**。换句话说，**2NF强调的是表中的所有非主键列必须完全依赖于主键列**。
3. 3NF: 消除非主属性对候选键的传递依赖
    - 符合2NF的要求（见上文）
    - 非主键列必须直接依赖于主键列，不能存在**传递依赖**。即不能存在类似非主键列A依赖于主键列B，主键列B又依赖于主键A。
4. BNF: 消除主属性对候选键的传递依赖

表结构规范化的目的：

- 减少数据冗余
- 增加效率
- 易于维护

所谓的**实体完整型**就是唯一标识实体的主键与其描述该实体的其他**非主键属性**在**逻辑上**和**描述语义**上是**完整**的，即实体的**主键**与其他**非主键属性**是**紧密依赖**的，并且是**直接依赖**的。

## 事务的特性(ACID)
- 原子性(Atomicity)
事务的整个过程如原子操作一样，最终要么全部成功，或者全部失败，这个原子性是从最终结果来看的，从最终结果来看这个过程是不可分割的。

- 一致性(Consistency)
  - 一个事务必须使数据库从一个一致性状态变换到另一个一致性状态。

  - 首先回顾一下一致性的定义。所谓一致性，指的是数据处于一种有意义的状态，这种状态是语义上的而不是语法上的。最常见的例子是转帐。例如从帐户A转一笔钱到帐户B上，如果帐户A上的钱减少了，而帐户B上的钱却没有增加，那么我们认为此时数据处于不一致的状态。

  - 从这段话的理解来看，所谓一致性，即，从实际的业务逻辑上来说，最终结果是对的、是跟程序员的所期望的结果完全符合的

- 隔离性(Isolation)
一个事务的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。

    这里先提一下事务的隔离级别：
    - 读未提交：read uncommitted
    - 读已提交：read committed
    - 可重复读：repeatable read
    - 串行化：serializable
- 持久性(Durability)
    一个事务一旦提交，他对数据库中数据的改变就应该是永久性的。当事务提交之后，数据会持久化到硬盘，修改是永久性的。